 <!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registration Form</title>

    <style>
        body {
            height: auto;
            width: 100vw;
        }

        .FormRegistraion-Container {
            height: auto;
            width: 500px;
            background-color: gray;
            display: flex;
            flex-direction: column;
            flex-wrap: wrap;
            align-items: center;
            margin-left: auto;
            margin-right: auto;
        }

        .Analytics-Container {
            height: auto;
            width: 500px;
            margin-top: 10px;
            margin-left: auto;
            margin-right: auto;
        }

        #statistics {
            display: block;
            margin-left: auto;
            margin-right: auto;
        }

        .errorSpans {
            display: none;
            color: red;
        }

        label {
            display: block;
        }
    </style>
</head>

<body>

    <div class="FormRegistraion-Container">
        <form onsubmit="onSubmit(event)">
            <label for="nameInput">Name</label>
            <input type="text" name="nameInput" id="nameInput" oninput="CheckNameValidation()">
            <span class="errorSpans" id="nameError"></span>
            <br />

            <label for="emailInput">Email</label>
            <input type="email" name="emailInput" id="emailInput" oninput="CheckEmailValidation()">
            <span class="errorSpans" id="emailError">Please enter a valid professional email address.</span>
            <br />

            <div>
                <label for="companyInput">Company/Institution Field</label>
                <input type="text" name="companyInput" id="companyInput">
            </div>
            <br />

            <label>Attendance type</label>
            <span id="radioSelected">Selected: none</span>
            <div>
                <label><input type="radio" name="radioInput" value="Virtual" onchange="CheckRadioValidation()"> Virtual</label>
                <label><input type="radio" name="radioInput" value="In-Person" onchange="CheckRadioValidation()"> In-Person</label>
                <span class="errorSpans" id="radioError"></span>
            </div>

            <input type="submit">
        </form>
    </div>

    <div class="Analytics-Container">
        <button id="statistics">Show Event Analytics</button>

        <!-- âœ… UPDATED "ONE PER ROW" ANALYTICS TABLE -->
        <table id="analytictable">
            <tbody>
                <tr>
                    <td>Total Number of Registrants</td>
                </tr>
                <tr>
                    <td id="totalCount">0</td>
                </tr>

                <tr>
                    <td>Count of Virtual</td>
                </tr>
                <tr>
                    <td id="virtualCount">0</td>
                </tr>

                <tr>
                    <td>Count of In-Person</td>
                </tr>
                <tr>
                    <td id="inPersonCount">0</td>
                </tr>
            </tbody>
        </table>
        <!-- END UPDATE -->

    </div>

    <script>
        const nameInputField = document.getElementById('nameInput')
        const emailInputField = document.getElementById('emailInput')
        const comapnyInputField = document.getElementById('companyInput')
        const radioInputField = document.querySelectorAll('input[name="radioInput"]')

        const analytics = []

        const onSubmit = (e) => {
            e.preventDefault()

            isNameValid = CheckNameValidation()
            isEmailValid = CheckEmailValidation()
            isAttendanceValid = CheckRadioValidation()

            if (
                isNameValid &&
                isEmailValid &&
                isAttendanceValid
            ) {

                const analytic = {
                    Name: nameInputField.value,
                    Email: emailInputField.value,
                    Company: comapnyInputField.value,
                    Attendance: isAttendanceValid
                };

                analytics.push(analytic);

                UpdateAnalyticsTable();

                alert("Form Submitted Successfully!");
            }
        }

        const UpdateAnalyticsTable = () => {
            const total = analytics.length;
            const virtual = analytics.filter(a => a.Attendance === "Virtual").length;
            const inPerson = analytics.filter(a => a.Attendance === "In-Person").length;

            document.getElementById("totalCount").innerHTML = total;
            document.getElementById("virtualCount").innerHTML = virtual;
            document.getElementById("inPersonCount").innerHTML = inPerson;
        }

        const CheckNameValidation = () => {
            const nameError = document.getElementById("nameError")

            if (nameInputField.value.length > 100 || nameInputField.value.length < 6) {
                nameError.style.display = "block"
                nameError.innerHTML = "Name must be between 6 and 100 characters."
            }
            else {
                nameError.style.display = "none"
                return true
            }
            return false
        }

        const CheckEmailValidation = () => {
            const emailError = document.getElementById("emailError")

            if (!emailInputField.value.includes('@')) {
                emailError.style.display = "block"
                emailError.innerHTML = "Please enter a valid professional email address."
            }
            else {
                emailError.style.display = "none"
                return true
            }
            return false
        }

        const CheckRadioValidation = () => {
            const radioError = document.getElementById("radioError")
            const seletedSpan = document.getElementById('radioSelected');
            let selected = null

            radioInputField.forEach(radio => {
                if (radio.checked) {
                    selected = radio.value;
                }
            })

            if (!selected) {
                radioError.style.display = "block"
                radioError.innerHTML = "Please select your attendance type."
                return null
            }
            else {
                radioError.style.display = "none"
                seletedSpan.innerHTML = `Selected: ${selected}`
                return selected
            }
        }
    </script>

</body>

</html>
